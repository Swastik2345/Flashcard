<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive Flashcards</title>
  <style>
    /* ==== GLOBAL STYLES ==== */
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #0f0f0f, #1a1a40, #0f0f0f);
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      color: #fff;
    }

    header {
      width: 100%;
      padding: 1rem;
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
      color: #fff;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.6);
      text-shadow: 0 0 10px cyan, 0 0 20px cyan;
    }

    .controls {
      margin: 1rem;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }

    button {
      padding: 10px 15px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: rgba(0, 255, 255, 0.15);
      color: cyan;
      font-weight: bold;
      transition: 0.3s;
      box-shadow: 0 0 10px cyan, inset 0 0 10px cyan;
    }

    button:hover {
      background: rgba(0, 255, 255, 0.3);
      transform: scale(1.05);
    }

    .form-container {
      display: none;
      flex-direction: column;
      gap: 10px;
      margin: 1rem;
      background: rgba(255, 255, 255, 0.1);
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
      backdrop-filter: blur(10px);
    }

    input, textarea {
      padding: 8px;
      width: 100%;
      border: none;
      border-radius: 6px;
      background: rgba(255,255,255,0.1);
      color: white;
      outline: none;
    }

    input::placeholder, textarea::placeholder {
      color: #ccc;
    }

    .flashcard-container {
      perspective: 1000px;
      margin: 1rem;
    }

    .flashcard {
      width: 320px;
      height: 200px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      cursor: pointer;
      transition: transform 0.6s;
      transform-style: preserve-3d;
      position: relative;
      color: white;
      backdrop-filter: blur(10px);
    }

    .flashcard.flipped {
      transform: rotateY(180deg);
    }

    .front, .back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      border-radius: 12px;
    }

    .back {
      transform: rotateY(180deg);
      background: rgba(255, 255, 255, 0.15);
    }

    .hidden {
      display: none;
    }

    #quizSection {
      text-align: center;
      margin-top: 2rem;
      background: rgba(255, 255, 255, 0.1);
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,255,255,0.5);
    }

    #quizAnswer {
      margin: 1rem 0;
      padding: 8px;
      width: 80%;
      border-radius: 6px;
      border: none;
      outline: none;
      background: rgba(255,255,255,0.1);
      color: white;
    }

    #quizFeedback {
      margin-top: 0.5rem;
      font-weight: bold;
    }

    #finalScore {
      margin-top: 1.5rem;
      font-size: 1.3rem;
      font-weight: bold;
      text-shadow: 0 0 10px cyan;
    }

    canvas {
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <header>üìö Interactive Flashcards</header>

  <div class="controls">
    <button onclick="toggleForm()">‚ûï Add Card</button>
    <button onclick="nextCard()">‚û°Ô∏è Next</button>
    <button onclick="exportCards()">‚¨áÔ∏è Export</button>
    <button onclick="document.getElementById('fileInput').click()">‚¨ÜÔ∏è Import</button>
    <button onclick="startQuiz()">‚ùì Quiz Mode</button>
  </div>

  <div class="form-container" id="formContainer">
    <input type="text" id="question" placeholder="Enter Question">
    <textarea id="answer" placeholder="Enter Answer"></textarea>
    <button onclick="addCard()">Save Card</button>
  </div>

  <div class="flashcard-container">
    <div class="flashcard" id="flashcard" onclick="flipCard()">
      <div class="front" id="cardQuestion">No cards yet</div>
      <div class="back" id="cardAnswer"></div>
    </div>
  </div>

  <div id="quizSection" class="hidden">
    <h2>Quiz Mode</h2>
    <p id="quizQuestion"></p>
    <input type="text" id="quizAnswer" placeholder="Type your answer">
    <br>
    <button onclick="checkAnswer()">Check</button>
    <p id="quizFeedback"></p>
    <p id="scoreDisplay">Score: 0 / 0</p>
    <div id="finalScore"></div>
    <canvas id="scoreChart" width="300" height="300" class="hidden"></canvas>
  </div>

  <input type="file" id="fileInput" class="hidden" accept=".json" onchange="importCards(event)">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    let cards = JSON.parse(localStorage.getItem("flashcards")) || [];
    let currentIndex = 0;
    let quizIndex = 0;
    let correctCount = 0;
    let totalAnswered = 0;

    const flashcard = document.getElementById("flashcard");
    const cardQuestion = document.getElementById("cardQuestion");
    const cardAnswer = document.getElementById("cardAnswer");

    function toggleForm() {
      const form = document.getElementById("formContainer");
      form.style.display = form.style.display === "flex" ? "none" : "flex";
    }

    function addCard() {
      const q = document.getElementById("question").value.trim();
      const a = document.getElementById("answer").value.trim();
      if (!q || !a) return alert("Please enter both question and answer!");

      cards.push({ question: q, answer: a });
      localStorage.setItem("flashcards", JSON.stringify(cards));
      document.getElementById("question").value = "";
      document.getElementById("answer").value = "";
      toggleForm();
      showCard(cards.length - 1);
    }

    function showCard(index) {
      if (cards.length === 0) {
        cardQuestion.textContent = "No cards yet";
        cardAnswer.textContent = "";
        return;
      }
      currentIndex = index % cards.length;
      cardQuestion.textContent = cards[currentIndex].question;
      cardAnswer.textContent = cards[currentIndex].answer;
      flashcard.classList.remove("flipped");
    }

    function nextCard() {
      if (cards.length > 0) {
        showCard((currentIndex + 1) % cards.length);
      }
    }

    function flipCard() {
      flashcard.classList.toggle("flipped");
    }

    function exportCards() {
      const blob = new Blob([JSON.stringify(cards)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "flashcards.json";
      a.click();
      URL.revokeObjectURL(url);
    }

    function importCards(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const imported = JSON.parse(e.target.result);
          if (Array.isArray(imported)) {
            cards = imported;
            localStorage.setItem("flashcards", JSON.stringify(cards));
            showCard(0);
            alert("Cards imported successfully!");
          }
        } catch {
          alert("Invalid file format!");
        }
      };
      reader.readAsText(file);
    }

    // Quiz Mode
    function startQuiz() {
      if (cards.length === 0) return alert("No cards to quiz!");
      quizIndex = 0;
      correctCount = 0;
      totalAnswered = 0;

      document.getElementById("quizSection").classList.remove("hidden");
      document.querySelector(".flashcard-container").classList.add("hidden");
      document.getElementById("quizFeedback").textContent = "";
      document.getElementById("scoreDisplay").textContent = "Score: 0 / 0";
      document.getElementById("finalScore").textContent = "";
      document.getElementById("scoreChart").classList.add("hidden");
      showQuizQuestion();
    }

    function showQuizQuestion() {
      if (quizIndex >= cards.length) {
        endQuiz();
        return;
      }
      document.getElementById("quizQuestion").textContent = cards[quizIndex].question;
      document.getElementById("quizAnswer").value = "";
    }

    function checkAnswer() {
      const userAns = document.getElementById("quizAnswer").value.trim().toLowerCase();
      const correctAns = cards[quizIndex].answer.trim().toLowerCase();
      const feedback = document.getElementById("quizFeedback");
      totalAnswered++;

      if (userAns === correctAns) {
        correctCount++;
        feedback.textContent = "‚úÖ Correct!";
        feedback.style.color = "lime";
      } else {
        feedback.textContent = `‚ùå Wrong! Correct: ${cards[quizIndex].answer}`;
        feedback.style.color = "red";
      }

      document.getElementById("scoreDisplay").textContent = `Score: ${correctCount} / ${totalAnswered}`;

      quizIndex++;
      setTimeout(showQuizQuestion, 1500);
    }

    function endQuiz() {
      document.getElementById("quizQuestion").textContent = "Quiz Finished!";
      document.getElementById("finalScore").textContent = `üéâ Final Score: ${correctCount} / ${totalAnswered}`;
      document.getElementById("scoreChart").classList.remove("hidden");

      const ctx = document.getElementById("scoreChart").getContext("2d");
      new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['Correct', 'Wrong'],
          datasets: [{
            data: [correctCount, totalAnswered - correctCount],
            backgroundColor: ['lime', 'red']
          }]
        }
      });
    }

    // Load first card
    showCard(0);
  </script>
</body>
    </html>
